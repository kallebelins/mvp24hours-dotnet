# Mvp24Hours SDK - Cursor Rules para Desenvolvimento .NET

## üéØ Objetivo

Esta regra define que, ao desenvolver qualquer solu√ß√£o ou arquitetura em .NET, o agente de IA **DEVE OBRIGATORIAMENTE** consultar a documenta√ß√£o do SDK Mvp24Hours antes de tomar qualquer decis√£o de implementa√ß√£o. O SDK cont√©m solu√ß√µes prontas, templates de arquitetura e padr√µes validados que devem ser seguidos.

---

## üìö Fontes de Documenta√ß√£o Obrigat√≥rias

### Diret√≥rios Principais (SEMPRE CONSULTAR)
- **Documenta√ß√£o Completa**: `D:\Github\mvp24hours-dotnet\docs\en-us\`
- **Documenta√ß√£o para IA (Contexto Otimizado)**: `D:\Github\mvp24hours-dotnet\docs\en-us\ai-context\`

### Arquivos de Decis√£o (CONSULTAR PRIMEIRO)
| Arquivo | Quando Consultar |
|---------|------------------|
| `ai-context/home.md` | Vis√£o geral e instru√ß√µes para IA |
| `ai-context/decision-matrix.md` | Escolha de template/arquitetura |
| `ai-context/ai-decision-matrix.md` | Decis√µes sobre implementa√ß√£o de IA |
| `ai-context/architecture-templates.md` | Templates de arquitetura completos |
| `ai-context/project-structure.md` | Estrutura de projetos |

---

## üîç Palavras-Chave que FOR√áAM Consulta √† Documenta√ß√£o

Quando o usu√°rio mencionar qualquer uma dessas palavras-chave, o agente **DEVE** consultar a documenta√ß√£o antes de implementar:

### Arquitetura e Estrutura
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `crie uma arquitetura` | `decision-matrix.md`, `architecture-templates.md` |
| `revise a arquitetura` | `decision-matrix.md`, templates espec√≠ficos |
| `reestruture a arquitetura` | `project-structure.md`, templates espec√≠ficos |
| `implemente clean architecture` | `template-clean-architecture.md` |
| `implemente hexagonal` | `template-hexagonal.md` |
| `implemente ddd` | `template-ddd.md` |
| `implemente cqrs` | `template-cqrs.md`, `cqrs/home.md` |
| `implemente event-driven` | `template-event-driven.md` |
| `implemente microservices` | `template-microservices.md` |
| `minimal api` | `structure-minimal-api.md` |
| `n-layers` / `camadas` | `structure-simple-nlayers.md`, `structure-complex-nlayers.md` |

### Cache e Performance
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `adicione cache` | `modernization/hybrid-cache.md`, `caching-advanced.md` |
| `implemente cache` | `database-patterns.md` (se√ß√£o Redis), `modernization-patterns.md` |
| `redis` | `database-patterns.md`, `cqrs/integration-caching.md` |
| `output caching` | `modernization/output-caching.md` |
| `hybrid cache` | `modernization/hybrid-cache.md` |

### Observabilidade e Monitoramento
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `adicione monitoramento` | `observability-patterns.md`, `observability/home.md` |
| `adicione log` / `logging` | `observability-patterns.md`, `logging.md` |
| `adicione tracing` | `observability/tracing.md`, `cqrs/observability/tracing.md` |
| `adicione m√©tricas` / `metrics` | `observability/metrics.md`, `observability-patterns.md` |
| `opentelemetry` | `observability-patterns.md`, `observability/` |
| `health checks` | `observability-patterns.md` |
| `telemetria` | `telemetry.md`, `cqrs/observability/telemetry.md` |

### Mensageria e Comunica√ß√£o Ass√≠ncrona
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `adicione rabbitmq` | `messaging-patterns.md`, `cqrs/integration-rabbitmq.md`, `broker.md` |
| `message broker` | `broker.md`, `broker-advanced.md`, `messaging-patterns.md` |
| `fila de mensagens` | `messaging-patterns.md` |
| `eventos de dom√≠nio` | `cqrs/domain-events.md` |
| `eventos de integra√ß√£o` | `cqrs/integration-events.md` |

### Jobs e Tarefas Agendadas
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `adicione hangfire` | `cronjob.md`, `cronjob-advanced.md` |
| `cronjob` / `job agendado` | `cronjob.md`, `cronjob-advanced.md` |
| `background service` | `messaging-patterns.md` (se√ß√£o Hosted Service) |
| `hosted service` | `messaging-patterns.md` |
| `scheduled commands` | `cqrs/scheduled-commands.md` |

### API e Documenta√ß√£o
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `adicione openapi` | `modernization/native-openapi.md`, `webapi.md` |
| `swagger` | `webapi.md`, `webapi-advanced.md` |
| `versionamento de api` | `api-versioning-patterns.md` |
| `problem details` | `modernization/problem-details.md`, `error-handling-patterns.md` |
| `minimal apis` | `modernization/minimal-apis.md` |

### Mediator e CQRS
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `substitua o mediator` | `cqrs/home.md`, `cqrs/migration-mediatr.md` |
| `implemente mediator` | `cqrs/mediator.md`, `cqrs/getting-started.md` |
| `commands` / `queries` | `cqrs/commands.md`, `cqrs/queries.md` |
| `pipeline behaviors` | `cqrs/behaviors.md` |
| `saga pattern` | `cqrs/saga/home.md` |

### Resili√™ncia
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `resili√™ncia` / `resilience` | `modernization/http-resilience.md`, `modernization/generic-resilience.md` |
| `circuit breaker` | `cqrs/resilience/circuit-breaker.md`, `modernization-patterns.md` |
| `retry` / `tentativa` | `cqrs/resilience/retry.md`, `modernization-patterns.md` |
| `rate limiting` | `modernization/rate-limiting.md` |
| `idempotency` | `cqrs/resilience/idempotency.md` |
| `inbox/outbox` | `cqrs/resilience/inbox-outbox.md` |

### Banco de Dados
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `entity framework` / `ef core` | `database-patterns.md`, `database/efcore-advanced.md` |
| `mongodb` | `database-patterns.md`, `database/mongodb-advanced.md` |
| `dapper` | `database-patterns.md` (se√ß√£o Dapper) |
| `unit of work` | `database/use-unitofwork.md`, `cqrs/integration-unitofwork.md` |
| `repository` | `database/use-repository.md`, `cqrs/integration-repository.md` |
| `specification` | `specification.md`, `cqrs/specifications.md` |

### Seguran√ßa e Valida√ß√£o
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `seguran√ßa` / `security` | `security-patterns.md` |
| `valida√ß√£o` / `validation` | `validation.md`, `cqrs/validation-behavior.md` |
| `fluent validation` | `validation.md` |

### Testes
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `testes` / `testing` | `testing-patterns.md` |
| `unit test` | `testing-patterns.md` |
| `integration test` | `testing-patterns.md` |

### Containeriza√ß√£o
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `docker` | `containerization-patterns.md` |
| `container` | `containerization-patterns.md` |
| `aspire` | `modernization/aspire.md` |

### Implementa√ß√£o de IA
| Palavra-chave | Documenta√ß√£o a Consultar |
|---------------|--------------------------|
| `semantic kernel` | `ai-implementation-index.md`, `template-sk-*.md` |
| `chatbot` | `template-sk-chat-completion.md`, `template-skg-chatbot-memory.md` |
| `rag` | `template-sk-rag-basic.md` |
| `agente ia` / `ai agent` | `ai-decision-matrix.md`, `template-skg-react-agent.md` |
| `multi-agent` | `template-skg-multi-agent.md`, `template-agent-framework-multi-agent.md` |
| `planners` / `task decomposition` | `template-sk-planners.md` |
| `plugins` / `functions` / `tools` | `template-sk-plugins.md` |
| `chain of thought` / `reasoning` | `template-skg-chain-of-thought.md` |
| `checkpointing` / `state persistence` | `template-skg-checkpointing.md` |
| `document pipeline` / `document processing` | `template-skg-document-pipeline.md` |
| `graph executor` / `workflow orchestration` | `template-skg-graph-executor.md` |
| `human in loop` / `approval workflow` | `template-skg-human-in-loop.md` |
| `ai observability` / `ai metrics` | `template-skg-observability.md` |
| `streaming` / `real-time events` | `template-skg-streaming.md` |
| `agent framework` | `template-agent-framework-basic.md`, `template-agent-framework-workflows.md` |
| `agent middleware` | `template-agent-framework-middleware.md` |

---

## üìã Processo de Consulta Obrigat√≥rio

### Passo 1: Identifica√ß√£o de Palavras-Chave
Ao receber qualquer solicita√ß√£o relacionada a desenvolvimento .NET, verificar se cont√©m palavras-chave da lista acima.

### Passo 2: Consulta √† Documenta√ß√£o
Se palavras-chave forem identificadas:
1. **PRIMEIRO**: Ler `ai-context/home.md` para contexto geral
2. **SEGUNDO**: Ler `ai-context/decision-matrix.md` para orienta√ß√£o de decis√£o
3. **TERCEIRO**: Ler a documenta√ß√£o espec√≠fica baseada na palavra-chave
4. **QUARTO**: Ler os templates relevantes em `ai-context/`

### Passo 3: Aplica√ß√£o dos Padr√µes
- Seguir ESTRITAMENTE os padr√µes documentados
- Usar os pacotes NuGet especificados
- Aplicar as estruturas de projeto definidas
- Implementar os patterns conforme exemplos

---

## üèóÔ∏è Templates de Arquitetura Dispon√≠veis

### Templates B√°sicos
| Template | Complexidade | Arquivo |
|----------|--------------|---------|
| Minimal API | Baixa | `structure-minimal-api.md` |
| Simple N-Layers | M√©dia | `structure-simple-nlayers.md` |
| Complex N-Layers | Alta | `structure-complex-nlayers.md` |

### Templates Avan√ßados
| Template | Complexidade | Arquivo |
|----------|--------------|---------|
| CQRS | Alta | `template-cqrs.md` |
| Event-Driven | Alta | `template-event-driven.md` |
| Hexagonal | Alta | `template-hexagonal.md` |
| Clean Architecture | Alta | `template-clean-architecture.md` |
| DDD | Muito Alta | `template-ddd.md` |
| Microservices | Muito Alta | `template-microservices.md` |

---

## üì¶ Pacotes NuGet Padr√£o

### Core Framework
```xml
<PackageReference Include="Mvp24Hours.Core" Version="8.*" />
<PackageReference Include="Mvp24Hours.Application" Version="8.*" />
```

### Database - Entity Framework
```xml
<PackageReference Include="Mvp24Hours.Infrastructure.Data.EFCore" Version="8.*" />
```

### Database - MongoDB
```xml
<PackageReference Include="Mvp24Hours.Infrastructure.Data.MongoDb" Version="8.*" />
```

### Cache - Redis
```xml
<PackageReference Include="Mvp24Hours.Infrastructure.Caching.Redis" Version="8.*" />
```

### Messaging - RabbitMQ
```xml
<PackageReference Include="Mvp24Hours.Infrastructure.RabbitMQ" Version="8.*" />
```

### Pipeline
```xml
<PackageReference Include="Mvp24Hours.Infrastructure.Pipe" Version="8.*" />
```

### Web API
```xml
<PackageReference Include="Mvp24Hours.WebAPI" Version="8.*" />
```

### CQRS/Mediator
```xml
<PackageReference Include="Mvp24Hours.Infrastructure.Cqrs" Version="8.*" />
```

---

## ‚úÖ Checklist de Gera√ß√£o de C√≥digo

Antes de gerar qualquer c√≥digo, verificar:

- [ ] Consultou `decision-matrix.md` para escolher a arquitetura correta?
- [ ] Consultou o template espec√≠fico para a arquitetura escolhida?
- [ ] Est√° usando os pacotes NuGet do Mvp24Hours?
- [ ] Seguiu a estrutura de projeto documentada?
- [ ] Implementou as interfaces corretas (`IEntityBase<TKey>`, `IEntityLog`, etc.)?
- [ ] Aplicou o padr√£o de Dependency Injection documentado?
- [ ] Implementou Repository Pattern conforme documenta√ß√£o?
- [ ] Configurou Unit of Work quando necess√°rio?
- [ ] Usou `IBusinessResult<T>` para respostas de servi√ßo?
- [ ] Aplicou valida√ß√£o com FluentValidation?
- [ ] Configurou Health Checks?
- [ ] Configurou Swagger/OpenAPI?
- [ ] Configurou logging com NLog?

---

## üîÑ Conven√ß√µes de C√≥digo Mvp24Hours

### Entidades
```csharp
// Usar IEntityBase<TKey> para entidades com ID tipado
public class Customer : EntityBase<Guid> { }

// Usar IEntityLog para campos de auditoria
public class Customer : EntityBase<Guid>, IEntityLog { }
```

### Reposit√≥rio
```csharp
// Usar IRepository<TEntity> ou IRepositoryAsync<TEntity>
var repository = _unitOfWork.GetRepository<Customer>();
```

### Servi√ßos
```csharp
// Usar IBusinessResult<T> para retornos
public async Task<IBusinessResult<CustomerDto>> GetByIdAsync(Guid id)
```

### Inje√ß√£o de Depend√™ncia
```csharp
// Seguir padr√£o de extension methods
services.AddMvp24HoursDbContext<DataContext>();
services.AddMvp24HoursRepository(options => options.MaxQtyByQueryPage = 100);
```

---

## ‚ö†Ô∏è Regras Importantes

1. **NUNCA** implementar uma solu√ß√£o sem consultar a documenta√ß√£o primeiro
2. **SEMPRE** preferir solu√ß√µes j√° documentadas no SDK
3. **SEMPRE** usar os pacotes NuGet do Mvp24Hours quando dispon√≠veis
4. **SEMPRE** seguir os templates de estrutura de projeto
5. **NUNCA** reinventar padr√µes que j√° est√£o implementados no SDK
6. **SEMPRE** consultar m√∫ltiplos arquivos de documenta√ß√£o quando necess√°rio
7. **SEMPRE** validar se existe um template pronto antes de criar do zero

---

## üìñ Refer√™ncias R√°pidas

### Para CQRS/Mediator
- Documenta√ß√£o principal: `cqrs/home.md`
- Getting Started: `cqrs/getting-started.md`
- Commands: `cqrs/commands.md`
- Queries: `cqrs/queries.md`
- Migra√ß√£o do MediatR: `cqrs/migration-mediatr.md`

### Para Observabilidade
- Padr√µes: `observability-patterns.md`
- Logging: `logging.md`
- OpenTelemetry: `observability/`

### Para Moderniza√ß√£o .NET 9
- Overview: `modernization/dotnet9-features.md`
- Migration Guide: `modernization/migration-guide.md`
- Patterns: `modernization-patterns.md`

### Para IA/ML
- Overview: `ai-implementation-index.md`
- Decision Matrix: `ai-decision-matrix.md`
- Templates SK: `template-sk-*.md`
- Templates SKG: `template-skg-*.md`

---

## üéØ Exemplo de Fluxo de Decis√£o

**Usu√°rio solicita**: "Adicione cache na aplica√ß√£o"

**Processo do Agente**:
1. ‚úÖ Identificar palavra-chave: `cache`
2. ‚úÖ Consultar: `modernization/hybrid-cache.md`
3. ‚úÖ Consultar: `database-patterns.md` (se√ß√£o Redis)
4. ‚úÖ Consultar: `modernization-patterns.md`
5. ‚úÖ Verificar se projeto usa Redis ou HybridCache
6. ‚úÖ Aplicar padr√£o documentado com pacotes Mvp24Hours
7. ‚úÖ Gerar c√≥digo seguindo exemplos da documenta√ß√£o

---

*Esta regra garante consist√™ncia, qualidade e ader√™ncia aos padr√µes do SDK Mvp24Hours em todos os desenvolvimentos .NET.*
